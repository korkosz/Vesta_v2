<div class="VST-view-container">
    <!-- Ask header -->
    <section class="VST-view-header row">
        <div class="logo-wrapper">
            <img src="/images/icon-Idea.png" alt="Ask main icon" />
            <h1>ask <span class="VST-module-id">#{{$ctrl.ask.id}}</span></h1>
        </div>
        <header>
            <!-- Breadcrumb -->
            <div class="project-path">
                <h3 id="project">
                    <span class="project-badge">v</span>{{$ctrl.ask.projectName()}}
                </h3>
                <h3 id="module">{{$ctrl.ask.moduleName()}}</h3>
                <h3>Klasa</h3>
            </div>
            <!-- Buttons -->
            <div class="buttons">
                <!-- Button trigger modal -->
                <button type="button" class="VST-btn VST-btn-default" data-toggle="modal" data-target="#deleteAskModal">
                    <span class="glyphicon glyphicon-trash"></span>
                </button>

                <!-- DELETE Modal -->
                <div class="modal fade" id="deleteAskModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">Remove Ask</h4>
                            </div>
                            <div class="modal-body">
                                Are you sure you want to remove this ask ?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" ng-click="$ctrl.removeAsk()">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </section>

    <!-- Ask description -->
    <section class="VST-view-content row">
        <header>
            <p>Title:</p>
            <h4>[{{$ctrl.ask.number}}] {{$ctrl.ask.title}}</h4>
            <div class="VST-view-addDate">
                {{$ctrl.ask.creationDate | date: 'dd.MM.yy'}}
            </div>
        </header>
        <!-- Description wrapper -->
        <div class="VST-view-desc-wrapper">
            <!-- Buttons -->
            <div class="btn-group-desc" ng-switch="$ctrl.descriptionEdited">
                <button type="button" name="button" class="btn-edit" ng-switch-when="false" ng-click="$ctrl.editDescription()">
                <span class="glyphicon glyphicon-pencil"></span>
            </button>
                <button type="button" name="button" class="btn-save" ng-switch-when="true" ng-click="$ctrl.saveDescription()">
                <span class="glyphicon glyphicon-floppy-disk"></span>
            </button>
            </div>
            <!-- Description -->
            <div text-angular ng-model="$ctrl.ask.description" ta-disabled="!$ctrl.descriptionEdited" class="description" ta-toolbar="[['h1','h2','h3','pre'],['bold','italics', 'underline', 'strikeThrough', 'ul', 'ol', 'clear'],['html', 'insertImage', 'insertLink']]"></div>
        </div>
    </section>

    <section class="VST-view-aditional row">
        <!-- Responses -->
        <section class="responses-wrapper col-md-8">

            <!-- Ta sekcja ponizej jest klonowana dla kazdego responsa-->
            <section class="row" ng-repeat="response in $ctrl.responses" id="response.number">
                <div class="col-md-3">
                    <div class="row">
                        <!-- Save -->
                        <button class="col-md-offset-10" ng-if="response.edited" ng-click="$ctrl.saveResponse(response)">
                            S
                        </button>
                        <!-- Edit -->
                        <button class="col-md-offset-10" ng-if="!response.edited" ng-click="response.edited = true;">
                            E
                        </button>
                    </div>
                    <div class="row sideBox">
                        <div>{{response.creatorShort()}}</div>
                        <div>{{$ctrl.moment(response.creationDate).fromNow()}}</div>
                        <div>#{{response.number}}</div>
                    </div>
                </div>
                <div class="col-md-9 mainBox">
                    <div class="row">
                        <!-- Added Response Title -->
                        <!-- View -->
                        <div class="col-md-3" ng-if="!response.edited">
                            {{response.title}}
                        </div>
                        <!-- Edit -->
                        <div class="col-md-3">
                            <input type="text" ng-model="response.title" ng-if="response.edited">
                        </div>

                        <div class="col-md-offset-6 col-md-2">
                            <!--Added Response Likes-->
                            {{response.likes.length ? response.likes.length : 0}}
                            <button ng-click="$ctrl.likeDislikeResponse(response, true)" ng-disabled="!$ctrl.canLike(response)" ng-if="!$ctrl.alreadyLiked(response)">+</button>
                            <button ng-if="$ctrl.alreadyLiked(response)" ng-click="$ctrl.stopLiking(response)">Stop like</button>                    /
                            <!-- Added Response Dislikes-->
                            {{response.dislikes.length ? response.dislikes.length : 0}}
                            <button ng-click="$ctrl.likeDislikeResponse(response, false)" ng-disabled="!$ctrl.canDislike(response)">-</button>
                            <button ng-if="$ctrl.alreadyDisliked(response)" ng-click="$ctrl.stopDisliking(response)">Stop dislike</button>
                        </div>
                        <!-- Remove Button -->
                        <div class="col-md-1">
                            <button ng-click="$ctrl.removeResponse(response)">Remove</button>
                        </div>
                    </div>
                    <!-- Added Response Description -->
                    <!-- View -->
                    <div class="row" ng-if="!response.edited">
                        {{response.description}}
                    </div>
                    <!-- Edit -->
                    <div class="row">
                        <textarea ng-if="response.edited" ng-model="response.description" cols="60" rows="7"></textarea>
                    </div>
                </div>
            </section>

            <!-- New Response -->
            <section class="new-response">
                <!--Title-->
                <fieldset id="ask_title" class="fsStyle field-wrapper last">
                    <div class="title-wrapper">
                        <label class="label-modal">Title:</label>
                        <input name="ask_title" type="text" ng-model="$ctrl.response.title" placeholder="Add title here..." required/>
                    </div>
                </fieldset>

                <!--Description-->
                <fieldset id="ask_description" class="fsStyle">
                    <div class="desc-wrapper">
                        <label class="label-modal">Description:</label>
                        <textarea cols="30" rows="10" ng-model="$ctrl.response.description"></textarea>
                        <button ng-click="$ctrl.addResponse()">ADD RESPONSE</button>
                    </div>
                </fieldset>
            </section>
        </section>

        <!-- Good Points -->
        <section class="goodPoints col-md-4">
            <h2 class="VST-view-subheader">Good points</h2>
            <div class="goodPoints-wrapper">
                <input type="text" ng-model="$ctrl.goodPoint" class="VST-view-input" placeholder="Type good point...">
                <button ng-click="$ctrl.addGoodPoint()" class="VST-btn VST-btn-primary glyphicon glyphicon-plus"></button>
                <div class="goodPoints-box">
                    <div class="pill" ng-repeat="goodPoint in $ctrl.ask.goodPoints">
                        <span class="glyphicon glyphicon-ok"></span>
                        {{goodPoint}}
                        <button ng-click="$ctrl.removeGoodPoint(goodPoint)" class="glyphicon glyphicon-remove"></button>
                    </div>
                </div>
            </div>
        </section>
    </section>
</div>
<style>
    .sideBox {
        height: 90px;
        border: 1px solid black;
    }

    .mainBox {
        height: 200px;
        border: 1px solid black;
    }
</style>
