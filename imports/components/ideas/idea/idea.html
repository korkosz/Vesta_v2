<div class="row header"></div>
<div class="container">
    <!-- Idea header -->
    <section class="idea-header row">
        <!-- Header info content -->
        <div class="idea-header-content">
            <!-- Header info -->
            <header class="info">
                <h3 id="project">{{$ctrl.idea.projectName}}</h3>
                <h3 id="module">{{$ctrl.idea.module}}</h3>
                <div class="wrapper">
                    <h3>Status:</h3>
                    <div class="btn-group">
                        <select class="dropdown-toggle" ng-options="status for status in $ctrl.ideaStatuses.value" ng-model="$ctrl.idea.status" ng-change="$ctrl.setStatus()">
                        </select>
                    </div>
                </div>
            </header>
            <!-- Header reviewers -->
            <div class="reviewers">
                <h3>Reviewers:</h3>
                <div class="wrapper creator" ng-repeat="reviewer in $ctrl.idea.reviewers">
                    <div class="reviewer">
                        {{reviewer.profile.fullname}}
                    </div>
                </div>
                <div class="wrapper">
                    <div class="reviewer">{{$ctrl.idea.createdBy}}</div>
                </div>
                <div class="wrapper">
                    <div class="reviewer">Mateus Kork</div>
                </div>
                <button class="reviewer-button">+</button>
            </div>
        </div>
        <!-- Buttons -->
        <footer class="idea-header-footer">
            <new-task title="Create task" module="{{$ctrl.idea.module}}" project="{{$ctrl.idea.projectId}}"></new-task>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteIdeaModal">
                Delete
            </button>

            <!-- DELETE Modal -->
            <div class="modal fade" id="deleteIdeaModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">Remove Idea</h4>
                        </div>
                        <div class="modal-body">
                            Are you sure you want to remove this idea ?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" ng-click="$ctrl.removeIdea()">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </section>
    <!-- Idea description -->
    <section class="idea-content row">
        <h4>{{$ctrl.idea.title}}</h4>
        <div text-angular ng-model="$ctrl.idea.description" ta-disabled="!$ctrl.descriptionEdited"></div>
        <!-- Modal -->
        <div class="modal fade" id="imgModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body" id="imgModalBody">
                        <!-- Here goes image -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Idea comments -->
    <section class="idea-comments row">

        <!--        nowy review. widoczny tylko gdy
            a) uzytkownik jest zgloszony jako reviewer do tego idea
            b) uzytkownik nie dodal jeszcze swojego review
        -->

        <div class="new-comment row" ng-if="$ctrl.newReviewVisible()">
            <div class="wrapper">
                <div class="col-xs-3 status-wrapper">
                    <div class="btn-group">
                        <button type="button" class="dropdown-toggle status" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#" class="like"></a>
                            </li>
                            <li>
                                <a href="#" class="const"></a>
                            </li>
                            <li>
                                <a href="#" class="dislike"></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <h3 class="col-xs-9">{{$ctrl.currentUserName()}}</h3>
                <div class="col-xs-3">
                </div>
                <div class="comment-content col-xs-9">
                    <div class="row features">
                        <div class="pill-container col-xs-6">
                            <pill state="plus" ct-placeholder="+&nbsp;prons" ng-model="$ctrl.review.merits"></pill>
                        </div>
                        <div class="col-xs-6">
                            <pill state="minus" ct-placeholder="-&nbsp;cons" ng-model="$ctrl.review.drawbacks"></pill>
                        </div>
                    </div>
                    <textarea placeholder="Add description" ng-model="$ctrl.review.comment"></textarea>
                    <button class="btn btn-default" ng-click="$ctrl.addReview()">
                        Add
                    </button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

        <!-- tutaj ida reviews innych userow i aktualnie zalogowanego
                jesli juz dodal-->
        <div class="comment row" ng-repeat="review in $ctrl.reviews track by $index">
            <div class="wrapper">
                <div class="col-xs-3 status-wrapper">
                    <div class="status"></div>
                </div>
                <h3 class="col-xs-9">{{review.creator()}}
                    <button ng-click="$ctrl.removeReview(review._id)"
                            ng-if="$ctrl.removeReviewVisible(review._createdBy)">
                        X
                    </button>
                </h3>
                <div class="col-xs-3">
                </div>
                <div class="comment-content col-xs-9">
                    <div class="row features">
                        <div class="pill-container col-xs-6">
                            <pill state="plus" ng-model="review.merits" direction="read-only"></pill>
                        </div>
                        <div class="col-xs-6">
                            <pill state="minus" ng-model="review.drawbacks" direction="read-only"></pill>
                        </div>
                    </div>
                    <textarea ng-model="review.comment" readonly></textarea>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="comment row">
            <div class="wrapper">
                <div class="col-xs-3 status-wrapper">
                    <div class="status"></div>
                </div>
                <h3 class="col-xs-9">Mciej Chmiel
                    <button >
                        X
                    </button>
                </h3>
                <div class="col-xs-3">
                </div>
                <div class="comment-content col-xs-9">
                    <div class="row features">
                        <div class="pill-container col-xs-6">
                            <pill state="plus">mdkemdek</pill>
                            <pill state="plus">mdkemdek</pill>
                            <pill state="plus">mdkemdek</pill>
                        </div>
                        <div class="col-xs-6">
                            <pill state="minus">dede</pill>
                            <pill state="minus">dede</pill>
                            <pill state="minus">dede</pill>
                            <pill state="minus">dede</pill>
                        </div>
                    </div>
                    <textarea readonly>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</textarea>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </section>
</div>
