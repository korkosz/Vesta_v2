<div class="VST-view-container">

    <!-- Idea header -->

    <section class="VST-view-header row">
        <div class="logo-wrapper">
            <img src="/images/icon-Idea.png" alt="Idea main icon" />
            <h1>idea</h1>
        </div>
        <header>
            <!-- Project path -->
            <div class="project-path">
                <h3 id="project">{{$ctrl.idea.projectName()}}<span class="project-badge">v</span>Vesta</h3>
                <h3 id="module">{{$ctrl.idea.moduleName()}}</h3>
                <h3>Klasa</h3>
            </div>
            <!-- Buttons -->
            <div class="buttons">
                <!-- Create new task -->
                <new-task title="Create task" module="{{$ctrl.idea.module}}"
                          project="{{$ctrl.idea.projectId}}"></new-task>
                <!-- Button trigger modal -->
                <button type="button" class="btn-V btn-V-default"
                        data-toggle="modal" data-target="#deleteIdeaModal">
                    <span class="glyphicon glyphicon-trash"></span>
                </button>

                <!-- DELETE Modal -->
                <div class="modal fade" id="deleteIdeaModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="myModalLabel">Remove Idea</h4>
                            </div>
                            <div class="modal-body">
                                Are you sure you want to remove this idea ?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" ng-click="$ctrl.removeIdea()">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </section>

    <!-- Idea description -->

    <section class="VST-view-content row">
        <header>
            <p>Title:</p>
            <h4>[{{$ctrl.idea.number}}] {{$ctrl.idea.title}}
                <!-- Idea status -->
                <div class="idea-status-wrapper dropdown">
                    <button class="idea-status idea-status-Rejected dropdown-toggle" type="button"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">rejected</button>
                    <ul class="dropdown-menu">
                        <li class="idea-status idea-status-New">new</li>
                        <li class="idea-status idea-status-Consider">conside</li>
                        <li class="idea-status idea-status-Implemented">implemented</li>
                        <li class="idea-status idea-status-Rejected">rejected</li>
                    </ul>
                </div>
            </h4>
            <div class="idea-date">05.05.2016</div>
        </header>
        <!-- Description wrapper -->
        <div class="VST-view-desc-wrapper">
            <!-- Buttons -->
            <div class="btn-group-desc" ng-switch="$ctrl.descriptionEdited">
                <button type="button" name="button" class="btn-edit"
                        ng-switch-when="false" ng-click="$ctrl.editDescription()">
                    <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button type="button" name="button" class="btn-save"
                        ng-switch-when="true" ng-click="$ctrl.saveDescription()">
                    <span class="glyphicon glyphicon-floppy-disk"></span>
                </button>
            </div>
            <!-- Description -->
            <div text-angular ng-model="$ctrl.idea.description" ta-disabled="!$ctrl.descriptionEdited" class="description"></div>
            <!-- Reviewers -->
            <div class="reviewers">
                <pill ng-repeat="reviewer in $ctrl.reviewers"
                      value="reviewer"
                      read-only="!$ctrl.descriptionEdited"></pill>
                <select ng-model="$ctrl.reviewer"
                        ng-change="$ctrl.reviewerSelected()"
                        ng-options="user.profile.fullname for user in
                                        $ctrl.users"
                        ng-hide="$ctrl.users.length < 1">
                </select>
            </div>
        </div>
    </section>

    <!-- Idea comments -->

    <section class="idea-reviews row">

        <!--        nowy review. widoczny tylko gdy
            a) uzytkownik jest zgloszony jako reviewer do tego idea
            b) uzytkownik nie dodal jeszcze swojego review
        -->

        <!-- STARE - STARE - STARE -->

        <div class="new-comment row" ng-if="$ctrl.newReviewVisible()">
            <div class="wrapper">
                <div class="col-xs-3 status-wrapper">
                    <div class="btn-group">
                        <button type="button" class="dropdown-toggle status" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      </button>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="#" class="like"></a>
                            </li>
                            <li>
                                <a href="#" class="const"></a>
                            </li>
                            <li>
                                <a href="#" class="dislike"></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <h3 class="col-xs-9">{{$ctrl.currentUserName()}}</h3>
                <div class="col-xs-3">
                </div>
                <div class="comment-content col-xs-9">
                    <div class="row features">
                        <div class="pill-container col-xs-6">
                            <pill state="plus" ct-placeholder="+&nbsp;prons" ng-model="$ctrl.review.merits"></pill>
                        </div>
                        <div class="col-xs-6">
                            <pill state="minus" ct-placeholder="-&nbsp;cons" ng-model="$ctrl.review.drawbacks"></pill>
                        </div>
                    </div>
                    <textarea placeholder="Add description" ng-model="$ctrl.review.comment"></textarea>
                    <button class="btn btn-default" ng-click="$ctrl.addReview()">
                        Add
                    </button>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

        <!-- tutaj ida reviews innych userow i aktualnie zalogowanego
                jesli juz dodal-->
        <div class="comment row" ng-repeat="review in $ctrl.reviews track by $index">
            <div class="wrapper">
                <div class="col-xs-3 status-wrapper">
                    <div class="status"></div>
                </div>
                <h3 class="col-xs-9">{{review.creator()}}
                    <button ng-click="$ctrl.removeReview(review._id)"
                            ng-if="$ctrl.removeReviewVisible(review._createdBy)">
                        X
                    </button>
                </h3>
                <div class="col-xs-3">
                </div>
                <div class="comment-content col-xs-9">
                    <div class="row features">
                        <div class="pill-container col-xs-6">
                            <pill state="plus" ng-model="review.merits" direction="read-only"></pill>
                        </div>
                        <div class="col-xs-6">
                            <pill state="minus" ng-model="review.drawbacks" direction="read-only"></pill>
                        </div>
                    </div>
                    <textarea ng-model="review.comment" readonly></textarea>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>

        <!-- NOWE - NOWE - NOWE -->

        <div class="reviews-wrapper">
            <h2>reviwes</h2>

            <!-- New review box -->

            <div class="new-review-box" ng-if="$ctrl.newReviewVisible()">
                <div class="new-review-content-box">
                    <h3 class="col-xs-9">{{$ctrl.currentUserName()}}</h3>
                    <div class="prons-cons-wrapper">
                        <div class="prons-box">
                            <pill state="plus" ct-placeholder="+&nbsp;prons" ng-model="$ctrl.review.merits"></pill>
                        </div>
                        <div class="cons-box">
                            <pill state="minus" ct-placeholder="-&nbsp;cons" ng-model="$ctrl.review.drawbacks"></pill>
                        </div>
                    </div>
                    <textarea placeholder="Add description here..." ng-model="$ctrl.review.comment" class="desc-wrapper"></textarea>
                    <button class="btn btn-default" ng-click="$ctrl.addReview()">
                        Add
                    </button>
                </div>
            </div>

            <!-- Added rewiews -->

            <div class="reviews-added-wrapper">
                <!-- Review box -->
                <div class="review-box">
                    <div class="btn-group-desc">
                        <button><!-- button edycji komentarza -->
                            <span class="glyphicon glyphicon-pencil"></span>
                        </button>
                        <!--
                        <button> ** button zapisz komentarza
                            <span class="glyphicon glyphicon-floppy-disk"></span>
                        </button>
                    -->
                    </div>
                    <div class="review-content-box">
                        <header>
                            <h3>{{review.creator()}}Maciej Chmiel
                                <button class="btn-V btn-V-cancel">  <!-- ng-click="$ctrl.removeReview(review._id)"
                                        ng-if="$ctrl.removeReviewVisible(review._createdBy)"-->
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </h3>
                            <p class="review-addTime">
                                5 min ago
                            </p>
                        </header>
                        <div class="prons-cons-wrapper">
                            <div class="prons-box">
                                <!--<pill state="plus" ng-model="review.merits" direction="read-only"></pill>-->
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Jakis kurwa komentarz
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Penis korka
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Jakis kurwa komentarz moze troche dluzszy
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                            </div>
                            <div class="cons-box">
                                <!--<pill state="minus" ng-model="review.drawbacks" direction="read-only"></pill>-->
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-minus-sign"></span>
                                    Korek worek
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-minus-sign"></span>
                                    Jakis kurwa komentarz moze troche dluzszy tak zeby zajebac nic nieznaczaca trescia
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                            </div>
                        </div>
                        <div class="desc-wrapper">
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                                exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
                                irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat
                                nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa
                                qui officia deserunt mollit anim id est laborum.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Review box -->
                <div class="review-box">
                    <div class="btn-group-desc">
                        <button><!-- button edycji komentarza -->
                            <span class="glyphicon glyphicon-pencil"></span>
                        </button>
                        <!--
                        <button> ** button zapisz komentarza
                            <span class="glyphicon glyphicon-floppy-disk"></span>
                        </button>
                    -->
                    </div>
                    <div class="review-content-box">
                        <header>
                            <h3>{{review.creator()}}Maciej Chmiel
                                <button class="btn-V btn-V-cancel">  <!-- ng-click="$ctrl.removeReview(review._id)"
                                        ng-if="$ctrl.removeReviewVisible(review._createdBy)"-->
                                    <span class="glyphicon glyphicon-remove"></span>
                                </button>
                            </h3>
                            <p class="review-addTime">
                                5 min ago
                            </p>
                        </header>
                        <div class="prons-cons-wrapper">
                            <div class="prons-box">
                                <!--<pill state="plus" ng-model="review.merits" direction="read-only"></pill>-->
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Jakis kurwa komentarz
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Penis korka
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Jakis kurwa komentarz moze troche dluzszy
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                            </div>
                            <div class="cons-box">
                                <!--<pill state="minus" ng-model="review.drawbacks" direction="read-only"></pill>-->
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-minus-sign"></span>
                                    Korek worek
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                                <!-- Pill -->
                                <div class="pill" ng-class="$ctrl.stateClass">
                                    <span class="glyphicon glyphicon-minus-sign"></span>
                                    Jakis kurwa komentarz moze troche dluzszy tak zeby zajebac nic nieznaczaca trescia
                                    <button class="glyphicon glyphicon-remove"></button>
                                </div>
                            </div>
                        </div>
                        <div class="desc-wrapper">
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                                exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute
                                irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat
                                nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa
                                qui officia deserunt mollit anim id est laborum.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
